#!/usr/bin/env node

import { checkFileOrDir } from '../test/check.js'

function main
() {
  let count, recur

  if (process.argv.length < 3) {
    console.error('Pass a file or dir as the first arg.')
    process.exitCode = 1
    return
  }

  recur = 0
  if (process.argv.length > 3)
    recur = 1

  console.log('Checking ' + process.argv[2])
  count = checkFileOrDir(process.argv[2], recur)
  if (count) {
    console.log('\nFAILED: ' + count)
    process.exitCode = 2
  }
  else
    console.log('\nALL GOOD')
}

main()