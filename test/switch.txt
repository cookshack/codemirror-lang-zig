# empty

fn fun() noreturn {
  switch (a) { }
}

==>
Program(Decl(FnProto(fn,
                     Identifier,
                     ParamDeclList,
                     TypeExpr(Identifier)),
             Block(Statement(SwitchExpr(switch,
                                        Expr(PrimaryExpr(TypeExpr(Identifier))))))))

# prong

fn fun() noreturn {
  switch (a) {
  1 => one()
  }
}

==>
Program(Decl(FnProto(fn,
                     Identifier,
                     ParamDeclList,
                     TypeExpr(Identifier)),
             Block(Statement(SwitchExpr(switch,
                                        Expr(PrimaryExpr(TypeExpr(Identifier)))
                                        SwitchProng(SwitchCase(SwitchItem(Expr(PrimaryExpr(TypeExpr(Integer))))),
                                                    Expr(PrimaryExpr(TypeExpr(Identifier,
                                                                              FnCallArgs)))))))))

# else

fn fun() noreturn {
  switch (a) {
  else => one()
  }
}

==>
Program(Decl(FnProto(fn,
                     Identifier,
                     ParamDeclList,
                     TypeExpr(Identifier)),
             Block(Statement(SwitchExpr(switch,
                                        Expr(PrimaryExpr(TypeExpr(Identifier)))
                                        SwitchProng(SwitchCase(else),
                                                    Expr(PrimaryExpr(TypeExpr(Identifier,
                                                                              FnCallArgs)))))))))

# expr

const a = switch (tag) {
  .linux => 1,
  else => 2
};

==>
Program(Decl(VarDecl(const,
                     Name,
                     Expr(PrimaryExpr(TypeExpr(SwitchExpr(switch,
                                                          Expr(PrimaryExpr(TypeExpr(Identifier))),
                                                          SwitchProng(SwitchCase(SwitchItem(Expr(PrimaryExpr(TypeExpr(Identifier))))),
                                                                      Expr(PrimaryExpr(TypeExpr(Integer)))),
                                                          SwitchProng(SwitchCase(else),
                                                                      Expr(PrimaryExpr(TypeExpr(Integer)))))))))))

# inline

fn f1() noreturn {
  switch (a) {
  inline 0, 1 => |i| f2(i)
  }
}

==>
Program(Decl(FnProto(fn,
                     Identifier,
                     ParamDeclList,
                     TypeExpr(Identifier)),
             Block(Statement(SwitchExpr(switch,
                                        Expr(PrimaryExpr(TypeExpr(Identifier))),
                                        SwitchProng(inline,
                                                    SwitchCase(SwitchItem(Expr(PrimaryExpr(TypeExpr(Integer)))),
                                                               SwitchItem(Expr(PrimaryExpr(TypeExpr(Integer))))),
                                                    PtrIndexPayload(Identifier),
                                                    Expr(PrimaryExpr(TypeExpr(Identifier,
                                                                              FnCallArgs(Expr(PrimaryExpr(TypeExpr(Identifier)))))))))))))
