# asm

fn exit() usize {
  return asm volatile ("syscall"
                       // output
                       : [ret] "={rax}" (-> usize),
                       // input
                       : [number] "{rax}" (number),
                         [arg1] "{rdi}" (arg1),
                       // clobbers
                       : "rcx", "r11");
}

==>
Program(Decl(FnProto(fn,
                     Identifier,
                     ParamDeclList,
                     TypeExpr(Identifier)),
             Block(Statement(Expr(return,
                                  Expr(AsmExpr(asm,
                                               volatile,
                                               Expr(TypeExpr(StringLiteral,
                                                             LineComment)),
                                               AsmOutput(AsmOutputItem(Identifier,
                                                                       StringLiteral,
                                                                       TypeExpr(Identifier)),
                                                         LineComment,
                                                         AsmInput(AsmInputItem(Identifier,
                                                                               StringLiteral,
                                                                               Expr(TypeExpr(Identifier))),
                                                                  AsmInputItem(Identifier,
                                                                               StringLiteral,
                                                                               Expr(TypeExpr(Identifier))),
                                                                  LineComment,
                                                                  AsmClobbers(StringLiteral,
                                                                              StringLiteral))))))))))
